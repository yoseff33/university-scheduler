<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>توليد الجداول - نظام جدولة المحاضرات</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/print.css" media="print">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">
                <i class="fas fa-calendar-alt"></i> نظام جدولة المحاضرات
            </a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link"><i class="fas fa-home"></i> الرئيسية</a></li>
                <li><a href="data-entry.html" class="nav-link"><i class="fas fa-plus-circle"></i> إدخال البيانات</a></li>
                <li><a href="generate.html" class="nav-link"><i class="fas fa-cogs"></i> توليد الجداول</a></li>
                <li><a href="doctor-view.html" class="nav-link"><i class="fas fa-user-md"></i> جداول الدكاترة</a></li>
                <li><a href="room-view.html" class="nav-link"><i class="fas fa-door-open"></i> جداول القاعات</a></li>
                <li><a href="admin-reports.html" class="nav-link"><i class="fas fa-bug"></i> البلاغات</a></li>
                <li><a href="help.html" class="nav-link"><i class="fas fa-question-circle"></i> المساعدة</a></li>
            </ul>
        </div>
    </nav>

    <main class="main-content">
        <div class="page-header">
            <h1>توليد الجداول الدراسية</h1>
            <p>انقر على الزر لتوليد الجداول تلقائيًا، ثم قم بتعديلها يدوياً إذا لزم الأمر.</p>
        </div>

        <section class="card schedule-controls">
            <div class="card-header">
                <h2><i class="fas fa-random"></i> خيارات التوليد</h2>
            </div>
            <div class="card-body">
                <div class="control-buttons">
                    <button id="generate-schedule-btn" class="btn btn-success"><i class="fas fa-sync-alt"></i> توليد الجداول تلقائيًا</button>
                    <button id="edit-schedule-btn" class="btn btn-primary"><i class="fas fa-edit"></i> تحرير الجداول</button>
                    <button id="cancel-edit-btn" class="btn btn-warning hidden"><i class="fas fa-times"></i> إلغاء التحرير</button>
                    <button id="export-schedules-btn" class="btn btn-primary"><i class="fas fa-download"></i> تصدير الجداول كصور</button>
                    <button id="print-all-schedules-btn" class="btn btn-info"><i class="fas fa-print"></i> طباعة كل الجداول</button>
                    <button id="clear-schedules-btn" class="btn btn-danger"><i class="fas fa-redo"></i> بدء فصل جديد (مسح الجداول)</button>
                </div>
                <div id="generation-status" class="status-message info"></div>
            </div>
        </section>

        <section class="card" style="margin-top: 30px;">
            <div class="card-header">
                <h2><i class="fas fa-table"></i> الجداول المجدولة</h2>
            </div>
            <div class="card-body">
                <div id="schedule-output">
                    </div>
                <div id="no-schedules-message" class="empty-state hidden">
                    <p><i class="fas fa-info-circle"></i> لا توجد جداول لعرضها. يرجى إدخال البيانات وتوليد الجداول.</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>&copy; 2025 نظام جدولة المحاضرات الجامعية. جميع الحقوق محفوظة.</p>
    </footer>

    <div class="message-toast-container"></div>

    <div class="modal fade" id="editLectureModalBootstrap" tabindex="-1" aria-labelledby="editLectureModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editLectureModalLabel"><i class="fas fa-arrows-alt"></i> تعديل/نقل المحاضرة</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="current-lecture-info">
                        المحاضرة الحالية: <strong id="modal-current-course"></strong> لـ <strong id="modal-current-section"></strong> مع د. <strong id="modal-current-doctor"></strong> في قاعة <strong id="modal-current-room"></strong> يوم <strong id="modal-current-day"></strong> الساعة <strong id="modal-current-time"></strong>
                    </p>

                    <form id="modal-edit-form">
                        <div class="form-group">
                            <label for="modal-new-day"><i class="fas fa-calendar-day"></i> اليوم الجديد:</label>
                            <select id="modal-new-day" class="form-control" required>
                                <option value="">اختر يومًا</option>
                                <option value="sunday">الأحد</option>
                                <option value="monday">الإثنين</option>
                                <option value="tuesday">الثلاثاء</option>
                                <option value="wednesday">الأربعاء</option>
                                <option value="thursday">الخميس</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="modal-new-time"><i class="fas fa-clock"></i> الوقت الجديد:</label>
                            <select id="modal-new-time" class="form-control" required>
                                <option value="">اختر وقتًا</option>
                                </select>
                        </div>
                        <div class="form-group">
                            <label for="modal-new-room"><i class="fas fa-door-open"></i> القاعة الجديدة:</label>
                            <select id="modal-new-room" class="form-control" required>
                                <option value="">اختر قاعة</option>
                                </select>
                        </div>
                        <div class="form-group">
                            <label for="modal-new-doctor"><i class="fas fa-user-md"></i> الدكتور الجديد (اختياري - للنقل بين دكاترة):</label>
                            <select id="modal-new-doctor" class="form-control">
                                <option value="">نفس الدكتور</option>
                                </select>
                        </div>

                        <div id="modal-validation-feedback" class="status-message info hidden" style="margin-top: 20px;">
                            </div>

                        <div class="modal-actions">
                            <button type="submit" id="modal-save-btn" class="btn btn-success"><i class="fas fa-save"></i> حفظ التعديلات</button>
                            <button type="button" id="modal-remove-btn" class="btn btn-danger"><i class="fas fa-trash"></i> إزالة المحاضرة</button>
                            <button type="button" id="modal-cancel-btn" class="btn btn-warning" data-bs-dismiss="modal"><i class="fas fa-times"></i> إلغاء</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="js/generate.js"></script>
</body>
</html>
